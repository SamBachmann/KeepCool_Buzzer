<!DOCTYPE html>

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

	
    <title>Buzzer Keep Cool</title>
</head>
    
    
<body>
    <div align = "center">
        <h1>Buzzer Keep Cool</h1>
        <canvas width="400", height="400", id = 'canvas', onclick="restart()", style="border: solid 1px;"></canvas>
    </div>  

    <script>
        var canvas = document.getElementById("canvas")
        var ctx = canvas.getContext('2d')
        const TIMER_DURATION = 8

        
        var actualtime = TIMER_DURATION
        var firstPress = true
        var isRunning = false
        // Objets for the sound
        var bip = new Audio('bip.mp3')
        var buzzSound = new Audio('buzz.mp3')


        function restart() {
            console.log("restart")
            //beep
            buzzSound.pause()
            bip.play()

            actualtime = TIMER_DURATION
            if (!isRunning || firstPress){
                isRunning = true
                main()
                firstPress = false
            } 
        
        }
        

        function main() {
            //console.log("main")
            if (actualtime > 0){
                -- actualtime
                setTimeout(main, 1000)
            }else{
                console.log("BUZZ")
                isRunning = false
                buzzSound.play()
                 //buzz, we need a sound   
            }
                

            
        }

        function init() {
            ctx.arc(200,200, 150, 0, 2 * Math.PI)
            ctx.fillStyle = "red"
            ctx.fill()
        }

        init()
        
    </script>
</body>
    